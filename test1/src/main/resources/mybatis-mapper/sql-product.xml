<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.test1.mapper.ProductMapper">
<!-- 	<select id="selectProductList" parameterType="hashmap" resultType="com.example.test1.model.Product">
		SELECT * FROM
		ECO_PRODUCT
		WHERE 1=1
		<if test="code !=''">
		AND CODE = #{code}
		</if>
		<if test="keyword !=''">
		AND ITEM_NAME LIKE '%' #{keyword} '%'
		</if>
	</select> -->
	
	<select id="selectCodeList" parameterType="hashmap" resultType="com.example.test1.model.Product">
		SELECT * FROM
		ECO_PRODUCT
		WHERE 1=1
		<if test="code != '' ">
		AND CODE = #{code}
		</if>
	</select>
	
	<select id="selectProductInfo" parameterType="hashmap" resultType="com.example.test1.model.Product">
		SELECT *
		FROM ECO_PRODUCT
		WHERE ITEM_NO = #{itemNo}

	</select>
	
	<delete id="deleteProduct" parameterType="hashmap">
		DELETE
		FROM ECO_PRODUCT
		WHERE ITEM_NO = #{itemNo}
	</delete>
	
	<!-- 상품 리스트에 이미지 불러오기  -->
	<select id="selectProductFileInfo" parameterType="hashmap" resultType="com.example.test1.model.ProductFile">
		SELECT P.*,
			FILEPATH || FILENAME AS PATH
		FROM ECO_PRODUCT_IMAGE P
		WHERE KIND = 1
	</select>
	
	<!-- 상품 상세보기에서 이미지 불러오기  -->
	<select id="selectProductContentsFileInfo" parameterType="hashmap" resultType="com.example.test1.model.ProductFile">
		SELECT P.*,
			FILEPATH || FILENAME AS PATH
		FROM ECO_PRODUCT_IMAGE P
		WHERE KIND = 2
		AND ITEMNO = #{itemNo}
	</select>
	
	<!-- 상품 상세보기 화면에 상품 상세 정보에 보여줄 이미지 불러오기  -->
	<select id="selectProductDetailFileInfo" parameterType="hashmap" resultType="com.example.test1.model.ProductFile">
		SELECT P.*,
			FILEPATH || FILENAME AS PATH
		FROM ECO_PRODUCT_IMAGE P
		WHERE KIND = 3
		AND ITEMNO = #{itemNo}
	</select>
	
	<!-- 판매자 상품 추가  -->
	<insert id="insertProduct" parameterType="hashmap" useGeneratedKeys="true" keyProperty="itemNo" keyColumn="itemNo">
		INSERT INTO ECO_PRODUCT
		VALUES
			(null, #{name}, #{price}, #{Srate}, #{Prate}, #{contents}, #{trans}, #{sellYN}, NOW(), NOW(), #{cnt}, #{code}, 0)
	</insert>
</mapper>